{% extends "base.html" %}
{% block title %}My Tasks{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h4 mb-0">My Tasks</h1>
  </div>

  <div class="mb-3 d-flex gap-2 flex-wrap">
    <a class="btn {% if status_filter == 'ALL' %}btn-primary{% else %}btn-outline-primary{% endif %}"
       href="{% url 'my_tasks' %}">All</a>

    <a class="btn {% if status_filter == 'TODO' %}btn-primary{% else %}btn-outline-primary{% endif %}"
       href="{% url 'my_tasks' %}?status=TODO">To Do</a>

    <a class="btn {% if status_filter == 'DOING' %}btn-primary{% else %}btn-outline-primary{% endif %}"
       href="{% url 'my_tasks' %}?status=DOING">Doing</a>

    <a class="btn {% if status_filter == 'DONE' %}btn-primary{% else %}btn-outline-primary{% endif %}"
       href="{% url 'my_tasks' %}?status=DONE">Done</a>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <ul class="list-group list-group-flush">
        {% for task in tasks %}
          <li class="list-group-item">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <a class="text-decoration-none fw-semibold" href="{% url 'task_detail' task.id %}">
                  {{ task.title }}
                </a>
                <div class="text-muted small">
                  Project: {{ task.project.name }}
                  · Status: {{ task.get_status_display }}
                  · Priority: {{ task.get_priority_display }}
                  {% if task.due_date %} · Due: {{ task.due_date }}{% endif %}
                </div>
              </div>
            </div>
          </li>
        {% empty %}
          <li class="list-group-item">No tasks assigned to you yet.</li>
        {% endfor %}
      </ul>
    </div>
  </div>
{% endblock %}
